<body class="gradient-form" >
  <head><link rel="stylesheet" type="text/css" href="usuario.crear.component.scss"></head>
  <div >
    <div class="container">
        <div class="row ">
            <div class="col-xl-9">
              <div class="card">
                <h2 class="mb-2">Crear usuario</h2>

                <form [formGroup]="form" (ngSubmit)="crearUsuario()" class="obligatorio">
                  <div class="form-floating mb-2">
                    <input type="text" id="nombre" class="form-control form-control-lg" formControlName="nombre" placeholder="nombre">
                    <label class="form-label" for="nombre">Nombre<span class="required-field">*</span></label>
                  </div>
                  <div class="form-floating mb-2">
                    <input type="text" id="apellido" class="form-control form-control-lg" formControlName="apellido" placeholder="apellido">
                    <label class="form-label" for="apellido">Apellidos</label>
                  </div>
                  <div class="form-floating mb-2">
                    <input type="email" id="correo" class="form-control form-control-lg" formControlName="correo" placeholder="correo">
                    <label class="form-label" for="correo">Correo<span class="required-field">*</span></label>
                  </div>
                  <div class="form-floating mb-2">
                    <input type="password" id="password" class="form-control form-control-lg" formControlName="password" placeholder="password">
                    <label class="form-label" for="password">Contraseña<span class="required-field">*</span></label>
                  </div>
                  <div class="form-floating mb-2">
                    <input type="password" id="cpassword" class="form-control form-control-lg" formControlName="cpassword" placeholder="cpassword">
                    <label class="form-label" for="cpassword">Confirmar contraseña<span class="required-field">*</span></label>   
                  </div>
                  <span *ngIf="form.errors?.['passwordMatchError']" class="error-message">No coinciden las contraseñas</span>

                  <div class="d-md-flex justify-content-start align-items-center mb-2 py-2">
                    <label class="mb-0 me-4">Rol<span class="required-field">*</span> :</label>
                    <div class="form-check form-check-inline mb-0 me-2">
                      <input class="form-check-input" type="radio" name="nombreRol" id="administrador" value="ADMIN" formControlName="nombreRol" />
                      <label class="form-check-label" for="admin">Administrador</label>
                    </div>
                    <div class="form-check form-check-inline mb-10 me-2">
                      <input class="form-check-input" type="radio" name="nombreRol" id="operador" value="OPERADOR" formControlName="nombreRol" />
                      <label class="form-check-label" for="operador">Operador</label>
                    </div>
                  </div>
                  <div class="form-floating mb-2">
                    <div class="input">
                      <select class="form-select" id="direcciones" formControlName="direcciones">
                        <option value="" disabled selected>Seleccione las direcciones<span class="required-field">*</span></option>
                        <option *ngFor="let direccion of direccionesLista" [value]="direccion">{{ direccion }}</option>
                      </select>
                      <button (click)="agregarDirecciones()" class="btn btn-outline-success btn-input">Agregar dirección</button>
                    </div>
                  </div>
                  <div class="direcciones-lista">
                    <span *ngFor="let direccionSeleccionada of listaDeDireccionesSeleccionadas">
                      <h6>{{ direccionSeleccionada | formatEnum }},</h6>
                    </span>
                  </div>
                  
                  <div class="form-floating mb-2">
                    <div class="input">
                      <select class="form-select" id="procesos" formControlName="procesos">
                        <option value="" disabled selected>Seleccione el proceso<span class="required-field">*</span></option>
                        <option *ngFor="let proceso of procesosLista" [value]="proceso">{{ proceso }}</option>          
                      </select>
                      <button (click)="agregarProcesos()" class="btn btn-outline-success btn-input">Agregar proceso</button>
                    </div> 
                  </div>
                  <div class="direcciones-lista">
                    <span *ngFor="let lista of listaDeProcesosSeleccionadas">
                      <h6>{{ lista | formatEnum }},</h6>
                    </span>
                  </div>

                  <div class="form-floating mb-2">
                    <select class="form-select" id="idCargo" formControlName="idCargo">
                      <option value="" disabled selected>Seleccione el cargo<span class="required-field">*</span></option>
                      <option *ngFor="let cargo of cargos" [value]="cargo.idCargo">{{ cargo.nombre | formatEnum }}</option>
                    </select>
                  </div>
                  <div class="d-flex justify-content-center">
                    <button type="button" class="btn btn-secondary btn-block me-2"
                      [routerLink]="['/panelAdmin', { outlets: { 'OutletAdmin': ['listarUsuario'] } }]"
                      >Atrás</button>
                    <button type="submit" class="btn btn-success btn-block btn-lg" [disabled]="!form.valid">Registrar</button>
                  </div>
                </form>
              </div>
          </div>
        </div>
      </div>
    </div>
</body>